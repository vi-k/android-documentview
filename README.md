# DocumentView

Виджет на Kotlin для Android для вывода отформатированного текста. Замена TextView. Наследует от View.

Изначально создавался для вывода HTML. Для моих задач обычный TextView с его fromHtml() оказался недостаточным. Во-первых, не доставало растягивания по ширине (justification появился в API 26, а я ориентировался на API 15). Во-вторых, перенос строк на мягких переносах работал как-то уж совсем произвольно (то преносит, то не переносит, логики не увидел). В-третьих, HTML-код в моём головном проекте поставляется пользователем, и мне, с одной стороны, хотелось полностью контролировать, что будет в этом HTML, ограничивая пользователя от лишнего, а с другой стороны, наоборот, хотелось добавить возможности (дополнительные теги и аттрибуты), которых нет в обычном HTML.

Первый [проект](https://github.com/vi-k/android-html2spannable) свёлся к тому, что я сам парсил HTML и затем формировал из него [Spannable](https://developer.android.com/reference/android/text/SpannableStringBuilder). Столкнувшись с некоторыми ограничениями, решил сделать отдельный свой собственный ~велосипед~ класс [Document](https://github.com/vi-k/kotlin-utils/tree/master/src/main/java/ru/vik/utils/document), хранящий в себе форматированный документ. Причём сделать его не зависящим ни от Android SDK (прогнозируемая многоплатформенность Kotlin заставляет думать наперёд), ни от HTML. Парсинг HTML вынесен в отдельный класс [BaseHtml](https://github.com/vi-k/kotlin-utils/tree/master/src/main/java/ru/vik/utils/html), преобразованием результата парсинга в Document занимается класс [BaseHtmlDocument](https://github.com/vi-k/kotlin-utils/tree/master/src/main/java/ru/vik/utils/htmldocument).
